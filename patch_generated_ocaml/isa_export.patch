--- isa_export.ml.orig	2019-03-26 17:12:25.358498406 +0000
+++ isa_export.ml	2019-03-26 17:12:27.802476350 +0000
@@ -1,3 +1,17 @@
+(** This file is exported from Isabelle, and lightly patched (eg to
+   include this comment!). The OCaml interfaces wrap this basic
+   functionality. *)
+
+let check_flag = ref true
+
+module type MONAD = sig
+   type ('a, 'b) mm
+   val bind : ('a -> ('b, 'c) mm) -> ('a, 'c) mm -> ('b, 'c) mm
+   val fmap : ('a -> 'b) -> ('a, 'c) mm -> ('b, 'c) mm
+   val return : 'a -> ('a, 'b) mm
+end
+
+
 module Fun : sig
   val id : 'a -> 'a
   val comp : ('a -> 'b) -> ('c -> 'a) -> 'c -> 'b
@@ -1520,6 +1534,8 @@ let rec return x = failwith "undefined";
 
 end;; (*struct Monad*)
 
+module Make(Monad:MONAD) = struct
+
 module Post_monad : sig
   type ('a, 'b, 'c) store_ops =
     Make_store_ops of
@@ -2573,3 +2589,5 @@ let rec make_initial_im_state
     (let i = Insert_state.make_initial_insert_state r k v in (i, kvs));;
 
 end;; (*struct Insert_many_state*)
+
+end (* Make *)
